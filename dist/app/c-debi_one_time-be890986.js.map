{"version":3,"sources":["webpack:///./src/Admin/OneTime/index.js","webpack:///./node_modules/@wpackio/entrypoint/lib/index.js"],"names":["$","d","ajax_url","action","nonce","route","jQuery","document","window","c_debi_plugin","ready","on","e","preventDefault","messageEl","this","find","eq","html","reqs","each","i","v","push","JSON","parse","value","length","pollInterval","ajax","url","type","data","error","jqXHR","textStatus","errorThrown","console","log","success","res","clearInterval","stringify","triggerActions","path","replace","concat"],"mappings":";;;;;;;;;;;;;;;;;uIAAA,IAAGA,EAAGC,EAAO,EAEDC,EAAUC,EAAQC,EAAOC,EAFlCL,EA4DCM,OA5DEL,EA4DMM,SA5DC,EAEkCC,OAAOC,cAA1CP,EAFC,EAEDA,SAAUC,EAFT,EAESA,OAAQC,EAFjB,EAEiBA,MAAOC,EAFxB,EAEwBA,MAEjCL,EAAEC,GAAGS,OAAM,WAEKV,EAAE,aAMTW,GAAG,UAAU,SAASC,GACvBA,EAAEC,iBACF,IAAMC,EAAad,EAAEe,MAAMC,KAAK,oBAAoBC,GAAG,GACvDH,EAAUI,KAAK,IAEf,IAAIC,EAAO,GAWX,OAVAnB,EAAEe,MAAMC,KAAK,kCAAkCI,MAAM,SAACC,EAAGC,GACrDH,EAAKI,KAAKC,KAAKC,MAAMH,EAAEI,WAGvBP,EAAKQ,SAWjB,SAAwBR,EAAML,GAAgC,IAArBc,EAAoB,uDAAL,KACpD5B,EAAE6B,KAAK,CACHC,IAAK5B,EAAU6B,KAAM,OACrBC,KAAM,CAAC7B,SAAQC,QAAOC,QAAOc,QAC7Bc,MAAO,SAACC,EAAOC,EAAYC,GACvBC,QAAQC,IAAIF,IAEhBG,QAAS,SAACC,GACFZ,GACApB,OAAOiC,cAAcb,GAEzBd,EAAUI,KAAV,eAAuBM,KAAKkB,UAAUF,GAAtC,cApBAG,CAAexB,EAAML,GACrBA,EAAUI,KAAK,0BAGZ,S,gCCnBH,IAAI0B,EAAK,YAA6CC,QAAQ,kBAAkB,IAChG,IAAwBrC,OAAO,YAAYsC,OAAOF,M","file":"app/c-debi_one_time-be890986.js","sourcesContent":["(( $, d ) => {\r\n\r\n    const { ajax_url, action, nonce, route } = window.c_debi_plugin\r\n\r\n    $(d).ready(() => {\r\n\r\n        OneTimeForm($('#one-time'))\r\n\r\n    });\r\n\r\n    function OneTimeForm(form) {\r\n\r\n        form.on('submit', function(e){\r\n            e.preventDefault()\r\n            const messageEl =  $(this).find('.status .message').eq(0)\r\n            messageEl.html('')\r\n\r\n            let reqs = [];\r\n            $(this).find('input[type=\"checkbox\"]:checked').each( (i, v) => {\r\n                reqs.push(JSON.parse(v.value))\r\n            } );\r\n\r\n            if (reqs.length) {\r\n                //const pollInterval = setPollInterval(reqs, statusEl)\r\n                triggerActions(reqs, messageEl)\r\n                messageEl.html(\"Awaiting response...\")\r\n            }\r\n\r\n            return false;\r\n\r\n        });\r\n    }\r\n\r\n    function triggerActions(reqs, messageEl, pollInterval = null){\r\n        $.ajax({\r\n            url: ajax_url, type: 'POST',\r\n            data: {action, nonce, route, reqs},\r\n            error: (jqXHR, textStatus, errorThrown) => {\r\n                console.log(errorThrown)\r\n            },\r\n            success: (res) => {\r\n                if (pollInterval) {\r\n                    window.clearInterval(pollInterval);\r\n                }\r\n                messageEl.html(`<pre>${JSON.stringify(res)}</pre>`);\r\n            }\r\n        })\r\n    }\r\n\r\n    function setPollInterval(reqs, messageEl) {\r\n        return window.setInterval(function(){\r\n            const status_reqs = reqs.map(req => ({ method: 'ActionStatus->get_status', payload: req.handler }))\r\n            $.ajax({ url: ajax_url, route,\r\n                data: { action, nonce, route, reqs: status_reqs }\r\n            }).done(function(res){\r\n                messageEl.append(`<pre>${JSON.stringify(JSON.parse(res), null, 2)}</pre>`);\r\n            });\r\n        }, 5000);\r\n    }\r\n\r\n})( jQuery, document );","\"use strict\";/* eslint-disable @typescript-eslint/camelcase */ /* eslint-disable no-underscore-dangle */ // eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n/* global __webpack_public_path__ */ // eslint-disable-next-line spaced-comment\n///<reference types=\"webpack-env\" />\n// We expect __webpack_public_path__ to be present, thanks to webpack\n// We are not using DOM in the typescript library, so let's just hack our way\n// through window\n// tslint:disable-next-line:no-any\n// We would override __webpack_public_path__ only if __WPACKIO__ webpack plugin is set\nif(__WPACKIO__){var path=(__WPACKIO__.appName+__WPACKIO__.outputPath).replace(/[^a-zA-Z0-9_-]/g,'');// eslint-disable-next-line no-global-assign\n__webpack_public_path__=window[\"__wpackIo\".concat(path)];}"],"sourceRoot":""}