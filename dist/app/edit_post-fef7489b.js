/*!
 * 
 * cDebi
 * 
 * @author 
 * @version 0.1.0
 * @link UNLICENSED
 * @license UNLICENSED
 * 
 * Copyright (c) 2020 
 * 
 * This software is released under the UNLICENSED License
 * https://opensource.org/licenses/UNLICENSED
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackiocDebiappJsonp=window.wpackiocDebiappJsonp||[]).push([[6],{11:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return i}))},12:function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,"a",(function(){return o}))},13:function(t,e,n){"use strict";function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return i}))},14:function(t,e,n){"use strict";function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return i}))},18:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(4),o=n(5);function r(t,e){return!e||"object"!==Object(i.a)(e)&&"function"!=typeof e?Object(o.a)(t):e}},19:function(t,e,n){"use strict";function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}n.d(e,"a",(function(){return o}))},2:function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},20:function(t,e,n){"use strict";var i=n(210),o=n.n(i);n(275);e.a=function(t){o()({text:t,duration:3e3,close:!0,gravity:"top",position:"right",backgroundColor:"rgb(195, 33, 33)",stopOnFocus:!0,onClick:function(){}}).showToast()}},209:function(t,e,n){"use strict";(function(t){var i=n(11),o=n(12),r=n(5),a=n(19),c=n(18),s=n(13),u=n(3),l=n(27),f=n(20),d=n(38),h=n(31),p=n(9);function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var b=window.jQuery,y=function(e){Object(a.a)(y,e);var n,l=(n=y,function(){var t,e=Object(s.a)(n);if(v()){var i=Object(s.a)(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Object(c.a)(this,t)});function y(t,e){var n;return Object(i.a)(this,y),n=l.call(this,t),Object(u.a)(Object(r.a)(n),"Input",void 0),Object(u.a)(Object(r.a)(n),"LookupTrigger",void 0),Object(u.a)(Object(r.a)(n),"value",void 0),n.initInput(),n.initLookupButton(e),n.value=n.getValue(),n}return Object(o.a)(y,[{key:"initInput",value:function(){this.Input=this.Container.find("input")}},{key:"getValue",value:function(){return this.Input.val()}},{key:"initLookupButton",value:function(e){var n=this,i=e.buttonLabel,o=e.lookupMethod;this.LookupTrigger=w(i,(function(e){e.preventDefault();var i=b(e.target);if(!i.isLoading()){var r=n.getValue();if(r){var a=Object(d.b)();a.hasOwnProperty("cachedLookupQuery")?n.initLookupSuggestions(a.cachedLookupQuery):(i.startLoading(),Object(h.b)(o,{id:r}).then((function(e){i.endLoading(),e.success?(t.env.DEBUG&&(a.cachedLookupQuery=e.data),n.initLookupSuggestions(e.data)):Object(f.a)("Error: ".concat(e.data))})))}else Object(f.a)("No value submitted.")}})),this.Container.addClass(p.k).children(".acf-input-wrap").append(this.LookupTrigger)}},{key:"initLookupSuggestions",value:function(t){var e=Object(d.b)();b(".".concat(p.j)).remove(),t.forEach((function(t){var n=t.field_name,i=t.value,o=t.preview,r=t.note;o=o||i,e[n].initLookupSuggestion(i,o,r)}))}}]),y}(l.a),w=function(t,e){return b('<button class="button button-primary '.concat(p.g,'">').concat(t,"</button>")).on("click",e)};e.a=y}).call(this,n(40))},210:function(t,e,n){(function(t){var e,i,o=n(2);
/*!
 * Toastify js 1.7.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */e=this,i=function(t){var e=function t(e){return new t.lib.init(e)};function n(t,e){return!(!t||"string"!=typeof e||!(t.className&&t.className.trim().split(/\s+/gi).indexOf(e)>-1))}return e.lib=e.prototype={toastify:"1.7.0",constructor:e,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||"Hi there!",this.options.duration=0===t.duration?0:t.duration||3e3,this.options.selector=t.selector,this.options.callback=t.callback||function(){},this.options.destination=t.destination,this.options.newWindow=t.newWindow||!1,this.options.close=t.close||!1,this.options.gravity="bottom"===t.gravity?"toastify-bottom":"toastify-top",this.options.positionLeft=t.positionLeft||!1,this.options.position=t.position||"",this.options.backgroundColor=t.backgroundColor,this.options.avatar=t.avatar||"",this.options.className=t.className||"",this.options.stopOnFocus=void 0===t.stopOnFocus||t.stopOnFocus,this.options.onClick=t.onClick,this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");if(t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(t.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):t.className+=" toastify-right",t.className+=" "+this.options.gravity,this.options.backgroundColor&&(t.style.background=this.options.backgroundColor),t.innerHTML=this.options.text,""!==this.options.avatar){var e=document.createElement("img");e.src=this.options.avatar,e.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?t.appendChild(e):t.insertAdjacentElement("beforeend",e)}if(!0===this.options.close){var n=document.createElement("span");n.innerHTML="&#10006;",n.className="toast-close",n.addEventListener("click",function(t){t.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var i=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&i>360?t.insertAdjacentElement("afterbegin",n):t.appendChild(n)}if(this.options.stopOnFocus&&this.options.duration>0){var o=this;t.addEventListener("mouseover",(function(e){window.clearTimeout(t.timeOutValue)})),t.addEventListener("mouseleave",(function(){t.timeOutValue=window.setTimeout((function(){o.removeElement(t)}),o.options.duration)}))}return void 0!==this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),this.options.onClick()}.bind(this)),t},showToast:function(){var t;if(this.toastElement=this.buildToast(),!(t=void 0===this.options.selector?document.body:document.getElementById(this.options.selector)))throw"Root element is not defined";return t.insertBefore(this.toastElement,t.firstChild),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var t,e={top:15,bottom:15},i={top:15,bottom:15},o={top:15,bottom:15},r=document.getElementsByClassName("toastify"),a=0;a<r.length;a++){t=!0===n(r[a],"toastify-top")?"toastify-top":"toastify-bottom";var c=r[a].offsetHeight;t=t.substr(9,t.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(r[a].style[t]=o[t]+"px",o[t]+=c+15):!0===n(r[a],"toastify-left")?(r[a].style[t]=e[t]+"px",e[t]+=c+15):(r[a].style[t]=i[t]+"px",i[t]+=c+15)}return this},e.lib.init.prototype=e.lib,e},"object"===o(t)&&t.exports?t.exports=i():e.Toastify=i()}).call(this,n(41)(t))},27:function(t,e,n){"use strict";var i=n(11),o=n(12),r=n(3),a=window.jQuery,c=function(){function t(e){Object(i.a)(this,t),Object(r.a)(this,"fieldName",void 0),Object(r.a)(this,"Container",void 0),this.fieldName=e,this.initContainer()}return Object(o.a)(t,[{key:"initContainer",value:function(){this.Container=a('.acf-field[data-name="'.concat(this.fieldName,'"] > .acf-input'))}}]),t}();e.a=c},274:function(t,e,n){n(29),t.exports=n(279)},275:function(t,e,n){},276:function(t,e,n){},279:function(t,e,n){"use strict";n.r(e);var i=n(9),o=window.jQuery,r=function(t){switch(t){case"publication":o(".acf-field-5eb9f05cc4075 .acf-input").append(o("#postdivrich"))}},a=n(38),c=n(31),s=(n(276),window.jQuery);s(document).ready((function(){Object(c.a)(),r(i.n),["dataset","data_project","publication"].includes(i.n)&&(s("body").addClass(i.b),s(".".concat(i.g)).remove(),Object(a.a)(i.n))}))},29:function(t,e,n){"use strict";var i="cDebidist".replace(/[^a-zA-Z0-9_-]/g,"");n.p=window["__wpackIo".concat(i)]},3:function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}))},31:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return h}));var i=n(9),o=window.jQuery,r=function(){return o('<span class="'.concat(i.i,'"></span>'))},a=window.jQuery,c=window.c_debi_plugin,s=c.ajax_url,u=c.action,l=c.nonce,f=c.route,d=function(t,e){return new Promise((function(n,i){a.ajax({type:"POST",url:s,data:{action:u,nonce:l,route:f,reqs:[{method:t,args:e}]},success:function(t,e,i){n(t)},error:function(t,e,n){i(n)}})}))},h=function(){a.fn.extend({isLoading:function(){return this.hasClass(i.e)},startLoading:function(){this.addClass(i.e),this.append(r())},endLoading:function(){this.removeClass(i.e),this.find(".".concat(i.i)).remove()}})}},38:function(t,e,n){"use strict";n.d(e,"b",(function(){return nt}));var i=n(11),o=n(12),r=n(3),a=n(9),c=window.jQuery,s=function(t,e,n){var i=c('<div class="'.concat(a.g," ").concat(a.j,"\">Use <a href='#'>").concat(t,"</a></div>"));return e&&i.append('<div class="note">'.concat(e,"</div>")),i.children("a").on("click",n),i},u=window.jQuery,l=function(){function t(){Object(i.a)(this,t),Object(r.a)(this,"Container",void 0),Object(r.a)(this,"LookupSuggestion",void 0),Object(r.a)(this,"Label",void 0),Object(r.a)(this,"Input",void 0),Object(r.a)(this,"value",void 0),this.initContainer(),this.initInput(),this.initLabel(),this.value=this.getValue()}return Object(o.a)(t,[{key:"initContainer",value:function(){this.Container=u("#titlewrap")}},{key:"initInput",value:function(){this.Input=this.Container.find("input")}},{key:"initLabel",value:function(){this.Label=this.Container.find("label")}},{key:"getValue",value:function(){return this.Input.val()}},{key:"setValue",value:function(t){this.Input.val(t),t?this.Label.addClass("screen-reader-text"):this.Label.removeClass("screen-reader-text")}},{key:"initLookupSuggestion",value:function(t,e,n){var i=this;this.LookupSuggestion=s(e,n,(function(e){e.preventDefault(),i.setValue(t)})),this.Container.append(this.LookupSuggestion)}}]),t}(),f=n(209),d=n(5),h=n(19),p=n(18),v=n(13),b=n(27);function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var w=function(t){Object(h.a)(a,t);var e,n=(e=a,function(){var t,n=Object(v.a)(e);if(y()){var i=Object(v.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(p.a)(this,t)});function a(t){var e;return Object(i.a)(this,a),e=n.call(this,t),Object(r.a)(Object(d.a)(e),"Input",void 0),Object(r.a)(Object(d.a)(e),"LookupSuggestion",void 0),Object(r.a)(Object(d.a)(e),"value",void 0),e.initInput(),e.value=e.getValue(),e}return Object(o.a)(a,[{key:"initInput",value:function(){this.Input=this.Container.find("input")}},{key:"getValue",value:function(){return this.Input.val()}},{key:"setValue",value:function(t){this.Input.val(t),this.value=t}},{key:"initLookupSuggestion",value:function(t,e,n){var i=this;this.LookupSuggestion=s(e,n,(function(e){e.preventDefault(),i.setValue(t)})),this.Container.append(this.LookupSuggestion)}}]),a}(b.a);function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var m=window.jQuery,j=function(t){Object(h.a)(a,t);var e,n=(e=a,function(){var t,n=Object(v.a)(e);if(g()){var i=Object(v.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(p.a)(this,t)});function a(t){var e;return Object(i.a)(this,a),e=n.call(this,t),Object(r.a)(Object(d.a)(e),"value",void 0),Object(r.a)(Object(d.a)(e),"LookupSuggestion",void 0),e.value=e.getValue(),e}return Object(o.a)(a,[{key:"getValue",value:function(){return this.Container.find("li label.selected span").text()}},{key:"setValue",value:function(t){this.Container.find("li").each((function(e,n){var i=m(n).find("label span").text();m(n).find("label input").prop("checked",t===i)}))}},{key:"initLookupSuggestion",value:function(t,e,n){var i=this;this.LookupSuggestion=s(e,n,(function(e){e.preventDefault(),i.setValue(t)})),this.Container.append(this.LookupSuggestion)}}]),a}(b.a);function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var k=function(t){Object(h.a)(a,t);var e,n=(e=a,function(){var t,n=Object(v.a)(e);if(O()){var i=Object(v.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(p.a)(this,t)});function a(t){var e;return Object(i.a)(this,a),e=n.call(this,t),Object(r.a)(Object(d.a)(e),"value",void 0),Object(r.a)(Object(d.a)(e),"preview",void 0),Object(r.a)(Object(d.a)(e),"ValueInput",void 0),Object(r.a)(Object(d.a)(e),"PreviewInput",void 0),Object(r.a)(Object(d.a)(e),"LookupSuggestion",void 0),e.initValueInput(),e.initPreviewInput(),e.value=e.getValue(),e.preview=e.getPreview(),e}return Object(o.a)(a,[{key:"initValueInput",value:function(){this.ValueInput=this.Container.find('input[type="hidden"]')}},{key:"initPreviewInput",value:function(){this.PreviewInput=this.Container.find("input.hasDatepicker")}},{key:"getValue",value:function(){return this.ValueInput.val()}},{key:"getPreview",value:function(){return this.PreviewInput.val()}},{key:"setValue",value:function(t,e){this.ValueInput.val(t),this.PreviewInput.val(e),this.value=t,this.preview=e}},{key:"initLookupSuggestion",value:function(t,e,n){var i=this;this.LookupSuggestion=s(e,n,(function(n){n.preventDefault(),i.setValue(t,e)})),this.Container.append(this.LookupSuggestion)}}]),a}(b.a),C=n(14),E=n(8),R=function t(e,n,o,a,c,s){Object(i.a)(this,t),Object(r.a)(this,"Container",void 0),Object(r.a)(this,"fieldName",void 0),Object(r.a)(this,"rowId",void 0),Object(r.a)(this,"cellType",void 0),Object(r.a)(this,"cellName",void 0),Object(r.a)(this,"cellConfig",void 0),this.Container=e,this.fieldName=n,this.rowId=o,this.cellType=a,this.cellName=c,this.cellConfig=s};function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var S=function(t){Object(h.a)(a,t);var e,n=(e=a,function(){var t,n=Object(v.a)(e);if(L()){var i=Object(v.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(p.a)(this,t)});function a(t,e,o,c,s,u){var l;return Object(i.a)(this,a),l=n.call(this,t,e,o,c,s,u),Object(r.a)(Object(d.a)(l),"value",void 0),Object(r.a)(Object(d.a)(l),"Input",void 0),l.initInput(),l.value=l.getValue(),l}return Object(o.a)(a,[{key:"initInput",value:function(){this.Input=this.Container.find("input")}},{key:"getValue",value:function(){return this.Input.val()}},{key:"setValue",value:function(t){this.Input.val(t)}}]),a}(R),N=n(20),_=window.jQuery,I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i="".concat(a.f," disabled"),o="#",r="Edit the selected entity (none selected)";if(t&&e){switch(i=a.f,o="".concat(a.a,"/wp-admin"),t){case"post_object":default:o+="/post.php?post=".concat(e,"&action=edit")}n&&(r="Edit ".concat(n))}var c=_('\n    <a class="'.concat(i," ").concat(a.g,'" title="').concat(r,'" href="').concat(o,'" target="_blank">\n      <span class="screen-reader-text">Edit</span>\n      <span class="').concat(a.f,'-icon-bg">\n        <span class="').concat(a.f,'-icon"></span>\n      </span>\n    </a>'));return t&&e||c.on("click",(function(t){t.preventDefault(),Object(N.a)("No entity selected to edit.")})),c},P=function(t,e){var n=t.method,i=t.args,o=i.sourceEntity,r=i.targetEntity,a=i.fieldMap,c={method:n,reqs:[],rowsMissingRequiredFields:0};return e.forEach((function(t){var e={reqId:t.rowId,sourceEntity:o,targetEntity:r,fields:{},missingRequiredFields:[]};a.forEach((function(n){var i=n.sourceField,o=n.targetField,r=n.required,a=t.cells[i].getValue();e.fields[o]=a,r&&!a&&e.missingRequiredFields.push(i)})),c.reqs.push(e)})),c.rowsMissingRequiredFields=c.reqs.reduce((function(t,e){return t+e.missingRequiredFields.length?1:0}),0),c},T=n(31);function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var V=window.jQuery,D=function(t){Object(h.a)(c,t);var e,n=(e=c,function(){var t,n=Object(v.a)(e);if(x()){var i=Object(v.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(p.a)(this,t)});function c(t,e,o,a,s,u){var l;return Object(i.a)(this,c),l=n.call(this,t,e,o,a,s,u),Object(r.a)(Object(d.a)(l),"value",void 0),Object(r.a)(Object(d.a)(l),"preview",void 0),Object(r.a)(Object(d.a)(l),"Select",void 0),Object(r.a)(Object(d.a)(l),"EditEntity",void 0),Object(r.a)(Object(d.a)(l),"CreateNewEntity",void 0),Object(r.a)(Object(d.a)(l),"MatchedEntities",void 0),l.initSelect(),l.initEditEntity(),u.hasOwnProperty("createNewEntities")&&l.initCreateNewEntity(l.cellConfig.createNewEntities),l.value=l.getValue(),l.preview=l.getPreview(),l}return Object(o.a)(c,[{key:"initSelect",value:function(){var t=this;this.Select=this.Container.find("select").on("select2:select",(function(e){var n=e.params.data,i=n.id,o=n.text;t.value=i,t.preview=o,t.updateEditEntity()}))}},{key:"getValue",value:function(){return this.Select.find("option").val()}},{key:"getPreview",value:function(){return this.Select.find("option").text()}},{key:"setValue",value:function(t,e){var n,i,o,r;n=this.Select,i=t,o=e,r=new Option(o,i),n.children("option").remove(),n.append(r).trigger("change"),n.trigger({type:"select2:select",params:{data:{id:i,text:o},selected:!0}})}},{key:"initEditEntity",value:function(){this.EditEntity=I(this.cellType,this.value,this.preview),this.Container.children("div.acf-input").addClass(a.h).append(this.EditEntity)}},{key:"updateEditEntity",value:function(){this.EditEntity.remove(),this.EditEntity=this.initEditEntity()}},{key:"initCreateNewEntity",value:function(t){var e=this;this.CreateNewEntity||(this.CreateNewEntity=M((function(n){n.preventDefault();var i=V(n.target);if(!i.isLoading()){i.startLoading();var o=nt()[e.fieldName].rows[e.rowId],r=P(t,[o]),a=r.method,c=r.reqs;r.rowsMissingRequiredFields?(i.endLoading(),Object(N.a)('Missing required fields: "'.concat(c[0].missingRequiredFields.join('," "'),'"'))):Object(T.b)(a,c).then((function(t){if(i.endLoading(),t.success){var n=t.data[e.rowId];n.hasOwnProperty("error")?Object(N.a)("Request error (row ".concat(e.rowId,"): ").concat(t.data)):e.setValue(n.id,n.text)}else Object(N.a)("Request error: ".concat(t.data))}))}})),this.Container.append(this.CreateNewEntity))}},{key:"initMatchedEntities",value:function(t){var e=this;this.MatchedEntities||(this.MatchedEntities=q(t,(function(t){t.preventDefault();var n=V(t.target);e.setValue(n.data("id"),n.data("text"))})),this.Container.append(this.MatchedEntities))}}]),c}(R),M=function(t){return V('<div class="'.concat(a.g," ").concat(a.d,'">\n        <a href="#">Create and select a new entity</a>\n    </div>')).on("click",t)},q=function(t,e){var n=V('<div class="'.concat(a.g," ").concat(a.l,'"><label>Matched entities: </label></div>')),i=V("<ul></ul>");return n.append(i),t.forEach((function(t){var e=t.id,n=t.text;n="".concat(n," [ID: ").concat(e,"]"),i.append(V('<li class="'.concat(a.m,'"><a href="#" data-text="').concat(n,'" data-id="').concat(e,'">Select ').concat(n,"</a></li>")))})),n.find(".".concat(a.m," a")).on("click",e),n.on("select:first",(function(t){V(t.target).find(".".concat(a.m)).first().children("a").trigger("click")})),n},A=D,F=window.jQuery,Q=function(){function t(e,n,o){Object(i.a)(this,t),Object(r.a)(this,"Container",void 0),Object(r.a)(this,"fieldName",void 0),Object(r.a)(this,"rowId",void 0),Object(r.a)(this,"cells",{}),this.Container=e,this.fieldName=n,this.rowId=e.data("id"),this.initCells(o)}return Object(o.a)(t,[{key:"getCells",value:function(){return this.Container.children("td.acf-field")}},{key:"initCells",value:function(t){var e=this;this.getCells().each((function(n,i){e.initCell(F(i),t)}))}},{key:"initCell",value:function(t,e){var n,i=t.data("name"),o=t.data("type"),r=e.hasOwnProperty(i)?e[i]:null;switch(o){case"post_object":n=new A(t,this.fieldName,this.rowId,o,i,r);break;default:n=new S(t,this.fieldName,this.rowId,o,i,r)}this.cells[i]=n}}]),t}(),H=function t(e,n,o,a,c){Object(i.a)(this,t),Object(r.a)(this,"Container",void 0),Object(r.a)(this,"fieldName",void 0),Object(r.a)(this,"cellType",void 0),Object(r.a)(this,"cellName",void 0),Object(r.a)(this,"cellConfig",void 0),this.Container=e,this.fieldName=n,this.cellType=o,this.cellName=a,this.cellConfig=c};function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var B=window.jQuery,U=function(t){Object(h.a)(a,t);var e,n=(e=a,function(){var t,n=Object(v.a)(e);if(W()){var i=Object(v.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(p.a)(this,t)});function a(t,e,o,c,s){var u;return Object(i.a)(this,a),u=n.call(this,t,e,o,c,s),Object(r.a)(Object(d.a)(u),"CreateNewEntities",void 0),Object(r.a)(Object(d.a)(u),"SelectMatchedEntities",void 0),s.hasOwnProperty("createNewEntities")&&u.initCreateNewEntities(u.cellConfig.createNewEntities),u}return Object(o.a)(a,[{key:"initCreateNewEntities",value:function(t){var e=this;this.CreateNewEntities||(this.CreateNewEntities=z((function(n){n.preventDefault();var i=B(n.target);if(!i.isLoading()){var o=e.getUnselectedRows();if(o.length){i.startLoading();var r=P(t,o),a=r.method,c=r.reqs,s=r.rowsMissingRequiredFields;s?(i.endLoading(),Object(N.a)("Missing required fields on ".concat(s," row(s)"))):Object(T.b)(a,c).then((function(t){if(i.endLoading(),t.success)for(var n=0,o=Object.entries(t.data);n<o.length;n++){var r=o[n],a=Object(E.a)(r,2),c=a[0],s=a[1];if(s.hasOwnProperty("error"))Object(N.a)("Request error (row ".concat(c,"): ").concat(s.data));else nt()[e.fieldName].rows[c].cells[e.cellName].setValue(s.id,s.text)}else Object(N.a)("Request error: ".concat(t.data))}))}else Object(N.a)("No unselected rows")}})),this.Container.append(this.CreateNewEntities))}},{key:"initSelectMatchedEntities",value:function(){var t=this;this.SelectMatchedEntities||(this.SelectMatchedEntities=J((function(e){e.preventDefault(),t.getUnselectedRows().forEach((function(e){e.cells[t.cellName].MatchedEntities&&e.cells[t.cellName].MatchedEntities.trigger("select:first")}))})),this.Container.append(this.SelectMatchedEntities))}},{key:"getUnselectedRows",value:function(){var t=this,e=nt();return Object.entries(e[this.fieldName].rows).reduce((function(e,n){var i=Object(E.a)(n,2),o=(i[0],i[1]);return o.cells[t.cellName].getValue()||e.push(o),e}),[])}}]),a}(H),z=function(t){var e=B('<div class="'.concat(a.g," ").concat(a.c,'">\n      <a href="#">Create and select a new entity for unselected rows</a>\n     </div>'));return e.children("a").on("click",t),e},J=function(t){var e=B('<div class="'.concat(a.g," ").concat(a.o,'">\n      <a href="#">Select the first matched entity for all unselected rows</a>\n    </div>'));return e.children("a").on("click",t),e},G=U,Z=window.jQuery,$=function(){function t(e,n,o){Object(i.a)(this,t),Object(r.a)(this,"Container",void 0),Object(r.a)(this,"fieldName",void 0),Object(r.a)(this,"cells",{}),this.Container=e,this.fieldName=n,this.initCells(o)}return Object(o.a)(t,[{key:"getCells",value:function(){return this.Container.find("th.acf-th")}},{key:"initCells",value:function(t){var e=this;this.getCells().each((function(n,i){e.initCell(Z(i),t)}))}},{key:"initCell",value:function(t,e){var n,i=t.data("name"),o=t.data("type"),r=e.hasOwnProperty(i)?e[i]:null;switch(o){case"post_object":n=new G(t,this.fieldName,o,i,r);break;default:n=new H(t,this.fieldName,o,i,r)}this.cells[i]=n}}]),t}();function K(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,r=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){a=!0,o=t},f:function(){try{r||null==i.return||i.return()}finally{if(a)throw o}}}}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var tt=window.jQuery,et=function(t){Object(h.a)(a,t);var e,n=(e=a,function(){var t,n=Object(v.a)(e);if(Y()){var i=Object(v.a)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return Object(p.a)(this,t)});function a(t,e){var o;return Object(i.a)(this,a),o=n.call(this,t),Object(r.a)(Object(d.a)(o),"cellsConfig",void 0),Object(r.a)(Object(d.a)(o),"rows",{}),Object(r.a)(Object(d.a)(o),"headerRow",void 0),Object(r.a)(Object(d.a)(o),"LookupSuggestion",void 0),o.cellsConfig=e,o.initRows(),o.initRowChangeHandlers(),o.initHeader(),o}return Object(o.a)(a,[{key:"getRowContainers",value:function(){return this.Container.find("tr.acf-row:not(.acf-clone)")}},{key:"initRows",value:function(){var t=this;this.getRowContainers().each((function(e,n){t.initRow(tt(n))}))}},{key:"initRow",value:function(t){var e=t.data("id");this.rows.hasOwnProperty(e)||(this.rows[e]=new Q(t,this.fieldName,this.cellsConfig))}},{key:"addRow",value:function(){return this.Container.find('.acf-actions .acf-button[data-event="add-row"]').trigger("click"),this.getRowContainers().last().data("id")}},{key:"deleteRows",value:function(){var t=this;this.getRowContainers().each((function(e,n){return t.deleteRow(tt(n))}))}},{key:"deleteRow",value:function(t){var e=t.data("id");this.rows.hasOwnProperty(e)&&delete this.rows[e],t.remove()}},{key:"initRowChangeHandlers",value:function(){var t=this,e=function(e){return e.hasClass("acf-row")&&e.parents('div.acf-field[data-name="'.concat(t.fieldName,'"]')).length};window.acf.addAction("append",function(t){e(t)&&this.initRow(t)}.bind(this)),window.acf.addAction("remove",function(t){e(t)&&this.deleteRow(t)}.bind(this))}},{key:"getHeaderContainer",value:function(){return this.Container.find("thead tr")}},{key:"initHeader",value:function(){this.headerRow=new $(this.getHeaderContainer(),this.fieldName,this.cellsConfig)}},{key:"initLookupSuggestion",value:function(t,e,n){var i=this;this.LookupSuggestion=s(e,n,(function(e){e.preventDefault(),i.deleteRows();var n,o=[],r=nt(),a=K(t.entries());try{var c=function(){var t=n.value,e=((s=Object(E.a)(t,2))[0],s[1]),a=i.addRow();e.forEach((function(t){var e=t.field_name,n=t.value;n&&r[i.fieldName].rows[a].cells[e].setValue(n),t.hasOwnProperty("matched_entities")&&t.matched_entities.length&&(o.push(e),r[i.fieldName].rows[a].cells[e].initMatchedEntities(t.matched_entities))}))};for(a.s();!(n=a.n()).done;){var s;c()}}catch(t){a.e(t)}finally{a.f()}Object(C.a)(new Set(o)).forEach((function(t){i.headerRow.cells[t].initSelectMatchedEntities()}))})),this.Container.append(this.LookupSuggestion)}}]),a}(b.a),nt=function(){return window.c_debi_plugin.state},it=function(){var t={method:"create_new_entities",args:{sourceEntity:"crossrefPublication",targetEntity:"person",fieldMap:[{sourceField:"given",targetField:"first",required:!1},{sourceField:"family",targetField:"last",required:!0}]}};return{post_title:new l,publication_doi:new f.a("publication_doi",{buttonLabel:"Query CrossRef for field suggestions",lookupMethod:"crossref_fetch"}),publication_contribution_number:new w("publication_contribution_number"),publication_url:new w("publication_url"),publication_type:new j("publication_type"),publication_publisher_title:new w("publication_publisher_title"),publication_date_published:new k("publication_date_published"),publication_authors:new et("publication_authors",{person:{createNewEntities:t}}),publication_editors:new et("publication_editors",{person:{createNewEntities:t}})}};e.a=function(t){switch(t){case"publication":default:window.c_debi_plugin.state=it()}}},4:function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return i}))},40:function(t,e){var n,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var s,u=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?u=s.concat(u):f=-1,u.length&&h())}function h(){if(!l){var t=c(d);l=!0;for(var e=u.length;e;){for(s=u,u=[];++f<e;)s&&s[f].run();f=-1,e=u.length}s=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||l||c(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},41:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},5:function(t,e,n){"use strict";function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return i}))},8:function(t,e,n){"use strict";function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw r}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",(function(){return i}))},9:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"n",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"g",(function(){return a})),n.d(e,"i",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"k",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return f})),n.d(e,"j",(function(){return d})),n.d(e,"d",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"m",(function(){return v})),n.d(e,"l",(function(){return b})),n.d(e,"o",(function(){return y}));var i=window.location.protocol+"//"+window.location.host,o=window.c_debi_plugin.data.post_type,r="c-debi-plugin",a="c-debi-plugin-extra-markup",c="loader",s="disabled",u="lookup-trigger",l="has-edit-button",f="edit-entity-button",d="lookup-suggestion",h="create-new-entity",p="create-new-entities",v="matched-entity",b="matched-entities",y="select-first-matched-entities"}},[[274,0]]]);
//# sourceMappingURL=edit_post-fef7489b.js.map